華計簿報告ツール v0.02
https://tenco.info/
2018/1/30

○概要
このソフトウェアは、Tenco! サーバーに華計簿の
対戦結果データを報告するコマンドラインアプリケーションです。
Tenco! の詳細は、上記URLからご覧ください。

○華計簿について

さくらゆきかぜさん（@sakra_yukikaze）作成の対戦結果記録ツールです。
深秘録でいう辺獄録、非想天則でいう天則観にあたるツールになります。

本ツールは、華計簿に記録した対戦結果を報告する仕組みですので、先にこちらの導入をお願い致します。
入手先は、東方 Tools Wiki の下記ページに記載されています。
http://wikiwiki.jp/thtools/?%B2%DA%B7%D7%CA%ED

○インストール方法・使い方

１．インストール手順

圧縮ファイルを展開してできたフォルダ kkb_report_v*** を「フォルダごと」、
華計簿のフォルダ内においてください。

フォルダ名は自由に変えていただいてかまいません。

２．kkb_report.exe を実行（初回）

コマンドラインアプリケーションが立ち上がります。
初回報告時のみ、アカウント登録が必要になります。
このとき、すでにプレイヤーが Tenco! アカウントを持っているかどうかで手順が変わります
上記についても説明がでますので、適宜入力してください。
また、リプレイファイルの報告をするかどうかについても、適宜入力してください。

その後、自動的に対戦結果報告が実施されます。
デフォルトでは、全ての華計簿のプロファイルのデータを送信します。
対戦結果の報告が終わると、ウィンドウが勝手に閉じます。

３．以後の報告

kkb_report.exe を立ち上げると、前回報告分以降の対戦結果を
自動的にサーバーに送ってくれます。

４．そのほか

PCの時刻合わせをしておくと、マッチングの可能性が少しあがる、ご利益が得られるでしょう。
マッチング判定時に、お互いの対戦時刻を見ているからです。

○アップデート方法
新しいバージョンのプログラムを展開し、ファイルをそのまま上書きすれば完了です。
config_default.yaml は消さないでください（上書きしたままにしてください）。
起動できなくなります。

○実行オプション
-a 全件報告モード。サーバーから登録済み最終対戦時刻を取得せず、全件報告します
   同梱の「全件報告モード.bat」と同じ動きです。
   想定用途：複数プロファイルを使っていて、一方のプロファイルで報告したあと、
   他方のプロファイルで報告したら、最終対戦時刻以降のデータしか遅れなかったときなどです。

○設定ファイル（config.yaml）について
保存文字コードは UTF-8 または UTF-8N です。
メモ帳で上書きしてもかまいません。

値を書くときには、かならず「:」のあとに半角スペースを入れる必要があります。

一番下の database: -> file_path: の部分で、華計簿のデータベースのパスを指定できます。
また、account: -> name: と password: に、アカウント情報を設定できます
----
account: 
  name:              # アカウント名
  password:          # アカウントパスワード（SHA1ハッシュ暗号化済み）
database: 
  file_path: ../*.db   # 華計簿のデータベースファイルパス
----
データベースファイルパスは、固定名・ワイルドカードを使った指定のどちらでもかまいません。
固定名とすると、１つの華計簿プロファイルのみを報告することができます。


○FAQ
Q1.パスワードを忘れた！
- メールアドレス登録をしている方
　お手数ですが、Tenco! 管理者までご連絡ください。
　登録時のメールアドレスに対して、ランダムなパスワードに変更してご連絡いたします。

- メールアドレス登録をしなかった方
　下記の機能ができるまでお待ちください。
　パスワードを覚えていて、管理者に知られてもよければ、メールをいただければ対応いたします。

　今後、何らかの形でプレイヤーが自分でできる機能をご提供する予定ですが、
　まだいつ頃になるか分かりません。ご容赦願います。

Q2.間違って新しいデータを報告したので、古いデータが報告できなくなった！
　全件報告モードをお使いください。
　同梱の「全件報告モード.bat」を使うか、-a オプションを指定して実行してください。

Q3.アカウント情報の扱いについて
　メールアドレス・パスワードは暗号化されており、
　もとに戻すことができない形式で暗号化しているので、管理者の目にも触れません。

　登録されたメールアドレスは、パスワードをプレイヤーが忘れたときに、
　Tenco!側からご連絡する際、プレイヤーの本人確認をするためだけに使います。
　他の用途には使いません。

Q4.アカウント削除したい！
　アカウント削除機能は未実装なので、お手数ですが、Tenco!管理者までご連絡ください。

Q5.アカウント削除時のデータの扱いについて
　メールアドレス・パスワード情報は削除いたします
　マイページも見えなくなり、他のTenco!内のページからはリンクされなくなります。

　対戦結果データはすべて非公開となります。
　ただし、こちらについては、Tenco!データベース上には残ります。
　
　Tenco!の管理人は一人であり、相互確認を誰ともできない状態で
　作業しております。このため、間違って別の方の対戦結果データを
　消したり、バグで全対戦結果データを消してしまったりして、
　他の多くのアカウントの方にご迷惑をかけることを心配しております。
　対策といたしまして、匿名の非公開データについては、
　極力削除をしない方針をとっております。
　
　非営利・個人でやっている以上、作業品質上どうしても制限があることを、
　ご理解いただければ幸いです。

Q6.マイページ上でみてお互い報告してるのに、マッチングしてないです
　両者の対戦時刻が大きくずれていませんか？両者のページを見て、見比べてみてください。
　
　お互いが認識している対戦時刻が、5分以上ずれているとマッチングしません。
　自分のPCの時刻設定を見直しましょう。
　相手の時刻がくるっているのであれば、連絡するか、あきらめましょう。

○連絡先
twitter/メールにて、サイトに宛先が書いてありますので、
そちらにご連絡ください。
実績として、メールは反応がかなり悪いです。

○ライセンスについて
複製自由・再配布自由・改変自由

ただし、実行ファイルには Rubyインタプリタが含まれます。
これにはRubyライセンスが適用されるため、配布時には下記のいずれかが必要です。
（詳細はRubyライセンスを参照ください）

* Rubyインタプリタのソースコードの入手先をドキュメント等に記載する。
* Rubyインタプリタのソースコードを同梱する。

本プログラムもRubyライセンスに従い、ソースコードの入手先を示します。

オブジェクト指向スクリプト言語 Ruby
http://www.ruby-lang.org/ja/

○謝辞
プレイヤーの皆様
華計簿を制作したさくらゆきかぜさん（@sakra_yukikaze）
Tenco!ユーザーの皆様
黄昏フロンティアの皆様

○免責
このプログラム無保証です。作者はサポートする意志はありますが、
使用によって生じたいかなる損害に対しても責任を持ちません。

